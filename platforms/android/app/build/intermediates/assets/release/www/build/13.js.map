{"version":3,"sources":["../../src/pages/invite-user/invite-user.module.ts","../../src/pages/invite-user/invite-user.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAAyC;AACO;AACD;AAU/C;IAAA;IAAmC,CAAC;IAAvB,oBAAoB;QARhC,uEAAQ,CAAC;YACR,YAAY,EAAE;gBACZ,oEAAc;aACf;YACD,OAAO,EAAE;gBACP,sEAAe,CAAC,QAAQ,CAAC,oEAAc,CAAC;aACzC;SACF,CAAC;OACW,oBAAoB,CAAG;IAAD,2BAAC;CAAA;AAAH;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACZS;AACgC;AAGrC;AAOrC;IAME,wBAAmB,OAAsB,EACtB,SAAoB,EACpB,SAA0B;QAF1B,YAAO,GAAP,OAAO,CAAe;QACtB,cAAS,GAAT,SAAS,CAAW;QACpB,cAAS,GAAT,SAAS,CAAiB;QAN7C,aAAQ,GAAG,EAAW,CAAC;QACvB,UAAK,GAAG,EAAE,CAAC;QACX,QAAG,GAAG,EAAE,CAAC;QAKP,IAAI,CAAC,QAAQ,GAAG,SAAS,CAAC,IAAI,CAAC;IACjC,CAAC;IAED,uCAAc,GAAd;QACE,OAAO,CAAC,GAAG,CAAC,+BAA+B,CAAC,CAAC;IAC/C,CAAC;IAED,+BAAM,GAAN;QAAA,iBAgBC;QAfC,IAAI,KAAK,GAAG,mDAAkB,EAAE,CAAC,UAAU,CAAC,OAAO,CAAC,CAAC,KAAK,CAAC,OAAO,EAAE,IAAI,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC,GAAG,EAAE,CAAC,IAAI,CAAC,UAAC,CAAC;YACjG,EAAE,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC,EAAC;gBACrB,OAAO,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;gBACrB,KAAI,CAAC,gBAAgB,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC;YACtC,CAAC;YACD,IAAI,EAAC;gBACH,uBAAuB;gBACvB,IAAI,GAAG,GAAG,KAAI,CAAC,SAAS,CAAC,MAAM,CAAC;oBAC9B,OAAO,EAAE,+BAA+B,GAAG,KAAI,CAAC,KAAK;oBACrD,QAAQ,EAAE,IAAI;oBACd,QAAQ,EAAE,QAAQ;iBACnB,CAAC,CAAC;gBACH,GAAG,CAAC,OAAO,EAAE,CAAC;YAChB,CAAC;QACH,CAAC,CAAC,CAAC;IACL,CAAC;IAGK,yCAAgB,GAAtB,UAAuB,GAAG;;;;;;KAiDzB;IApFU,cAAc;QAJ1B,wEAAS,CAAC;YACT,QAAQ,EAAE,kBAAkB;WACG;SAChC,CAAC;6EAOyC;YACX,sEAAS;YACT,WAAe;OARlC,cAAc,CAqF1B;IAAD,CAAC;AAAA;SArFY,cAAc,gB","file":"13.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { InviteUserPage } from './invite-user';\n\n@NgModule({\n  declarations: [\n    InviteUserPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(InviteUserPage),\n  ],\n})\nexport class InviteUserPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/invite-user/invite-user.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams, ToastController } from 'ionic-angular';\nimport { User } from '../../models/user';\nimport { Event } from '../../models/event';\nimport * as firebase from 'firebase';\n\n@IonicPage()\n@Component({\n  selector: 'page-invite-user',\n  templateUrl: 'invite-user.html',\n})\nexport class InviteUserPage {\n\n  eventRef = {} as Event;\n  email = \"\";\n  msg = \"\";\n\n  constructor(public navCtrl: NavController,\n              public navParams: NavParams,\n              public toastCtrl: ToastController) {\n    this.eventRef = navParams.data;\n  }\n\n  ionViewDidLoad() {\n    console.log('ionViewDidLoad InviteUserPage');\n  }\n\n  invite(){\n    var ucRef = firebase.firestore().collection('Users').where(\"email\", \"==\", this.email).get().then((d)=>{\n      if (d.docs.length > 0){\n        console.log(\"has !\");\n        this.pushEventRequest(d.docs[0].id);\n      }\n      else{\n        // cannot find this guy\n        let err = this.toastCtrl.create({\n          message: \"Cannot find user with email: \" + this.email,\n          duration: 3000,\n          position: \"bottom\"\n        });\n        err.present();\n      }\n    });\n  }\n\n\n  async pushEventRequest(fId){\n    /*\n    let fRef = firebase.firestore().collection('Users').doc(fId);\n    let eRef = await this.eventRef.get();\n    // determine if the person is already in list\n    if (fRef.friendList.length > 0 && undefined != eRef.participants.find((ele)=>{return ele.isEqual(fRef);})){\n      let err = this.toastCtrl.create({\n        message: \"User already in the list\",\n        duration: 3000,\n        position: \"bottom\"\n      });\n      err.present();\n      return undefined; // skip out\n    }\n\n    // determine if the person is in the block list\n    var isBlocked = false;\n    var is = await eRef.blockedUsers.find((bu)=>{ return bu.isEqual(eRef); });\n    if (undefined != is){\n        let err = this.toastCtrl.create({\n          message: \"Cannot find user with email: \" + this.email,  // Even its blocked, show cannot find to prevent user\n          duration: 3000,\n          position: \"bottom\"\n        });\n        err.present();\n        isBlocked = true;\n    }\n\n    if (!isBlocked) {\n      // get friends' request\n      let fReq = firebase.firestore().collection('Request').doc(fId);\n      let fReqGet = await fReq.get();\n      is = fReqGet.data().eventRequest.find((fr)=> { return fr.from.isEqual(eRef); });\n      if (undefined == is){\n        let fReqList = fReqGet.data().eventRequest;\n        fReqList.push({\n          from: eRef,\n          msg: this.msg.trim()\n        });\n        fReq.update('eventRequest',fReqList);\n      }\n      let msg = this.toastCtrl.create({\n        message: \"Sent \" + this.email + \" a invite request\",  // Even its blocked, show cannot find to prevent user\n        duration: 3000,\n        position: \"bottom\"\n      });\n      msg.present();\n    }\n      */\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/invite-user/invite-user.ts"],"sourceRoot":""}