{"version":3,"sources":["../../src/pages/chat/chat.module.ts","../../src/pages/chat/chat.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAAyC;AACO;AACd;AAUlC;IAAA;IAA6B,CAAC;IAAjB,cAAc;QAR1B,uEAAQ,CAAC;YACR,YAAY,EAAE;gBACZ,uDAAQ;aACT;YACD,OAAO,EAAE;gBACP,sEAAe,CAAC,QAAQ,CAAC,uDAAQ,CAAC;aACnC;SACF,CAAC;OACW,cAAc,CAAG;IAAD,qBAAC;CAAA;AAAH;;;;;;;;;;;;;;;;;;;;;;;ACZe;AACe;AAGpB;AAQrC;IAUE,kBAAmB,OAAsB,EACtB,SAAoB;QADpB,YAAO,GAAP,OAAO,CAAe;QACtB,cAAS,GAAT,SAAS,CAAW;QATvC,aAAa;QACb,YAAO,GAAG,EAAE,CAAC;QACb,SAAI,GAAG,EAAU,CAAC;QAElB,cAAS,GAAC,EAAE,CAAC;QACb,aAAQ,GAAC,EAAE,CAAC;QACZ,iBAAY,GAAG,KAAK,CAAC;QAInB,IAAI,CAAC,IAAI,CAAC,GAAG,GAAG,8CAAa,EAAE,CAAC,WAAW,CAAC,GAAG,CAAC;QAChD,IAAI,CAAC,IAAI,CAAC,KAAK,GAAG,8CAAa,EAAE,CAAC,WAAW,CAAC,KAAK,CAAC;QACpD,IAAI,CAAC,OAAO,GAAG,SAAS,CAAC,IAAI,CAAC;QAC9B,IAAI,CAAC,OAAO,EAAE,CAAC;IACjB,CAAC;IAED,iCAAc,GAAd;QACE,IAAI,CAAC,YAAY,EAAE,CAAC;IACtB,CAAC;IAED,0BAAO,GAAP;QAAA,iBAUC;QATC,IAAI,GAAG,GAAG,mDAAkB,EAAE,CAAC,UAAU,CAAC,OAAO,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;QACtE,GAAG,CAAC,GAAG,EAAE,CAAC,IAAI,CAAC,UAAC,GAAG;YACjB,EAAE,CAAC,CAAC,GAAG,CAAC,IAAI,EAAE,IAAI,IAAI,CAAC,EAAC;gBACtB,EAAE,CAAC,CAAC,GAAG,CAAC,IAAI,EAAE,CAAC,QAAQ,IAAI,EAAE,CAAC;oBAC5B,KAAI,CAAC,IAAI,CAAC,QAAQ,GAAG,GAAG,CAAC,IAAI,EAAE,CAAC,QAAQ,CAAC;gBAC3C,IAAI;oBACF,KAAI,CAAC,IAAI,CAAC,QAAQ,GAAG,GAAG,CAAC,IAAI,EAAE,CAAC,KAAK,CAAC;YAC1C,CAAC;QACH,CAAC,CAAC,CAAC;IACL,CAAC;IAED,gBAAgB;IAChB,+BAAY,GAAZ;QAAA,iBAOC;QANC,IAAI,CAAC,OAAO,CAAC,UAAU,CAAC,UAAC,GAAG;YAC1B,KAAI,CAAC,OAAO,GAAG,GAAG,CAAC,IAAI,EAAE,CAAC,QAAQ,CAAC;YACnC,KAAI,CAAC,SAAS,GAAG,GAAG,CAAC,IAAI,EAAE,CAAC,IAAI,CAAC;QACnC,CAAC,EAAE,UAAC,GAAG;YACL,OAAO,CAAC,KAAK,CAAC,SAAS,GAAG,GAAG,CAAC,OAAO,CAAC,CAAC;QACzC,CAAC,CAAC,CAAC;IACL,CAAC;IAED,mBAAmB;IACnB,2BAAQ,GAAR;QACE,IAAI,CAAC,YAAY,GAAG,CAAC,IAAI,CAAC,YAAY,CAAC;IACzC,CAAC;IAED,0BAAO,GAAP;QACE,4CAA4C;QAC5C,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,IAAI,EAAE,CAAC;YAAC,MAAM,CAAC;QAClC,IAAI,GAAG,GAAG;YACR,MAAM,EAAE,IAAI,CAAC,IAAI,CAAC,QAAQ;YAC1B,MAAM,EAAE,IAAI,CAAC,IAAI,CAAC,GAAG;YACrB,OAAO,EAAE,IAAI,CAAC,QAAQ,CAAC,IAAI,EAAE;SAAC,CAAC;QACjC,sEAAsE;QACtE,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;QACvB,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,EAAC,QAAQ,EAAE,IAAI,CAAC,OAAO,EAAC,CAAC,CAAC;QAC9C,IAAI,CAAC,QAAQ,GAAG,EAAE,CAAC;IACrB,CAAC;IA5DU,QAAQ;QAJpB,wEAAS,CAAC;YACT,QAAQ,EAAE,WAAW;WACG;SACzB,CAAC;8EAWyC;YACX,KAAS;OAX5B,QAAQ,CA8DpB;IAAD,CAAC;AAAA;SA9DY,QAAQ,e","file":"17.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { ChatPage } from './chat';\n\n@NgModule({\n  declarations: [\n    ChatPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(ChatPage),\n  ],\n})\nexport class ChatPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/chat/chat.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams } from 'ionic-angular';\nimport { User } from '../../models/user';\n\nimport * as firebase from 'firebase';\nimport { DocumentReference } from 'angularfire2/firestore';\n\n@IonicPage()\n@Component({\n  selector: 'page-chat',\n  templateUrl: 'chat.html',\n})\nexport class ChatPage {\n\n  // Properties\n  msgList = [];\n  user = {} as User;\n  chatRef: DocumentReference;\n  chatTitle=\"\";\n  msgInput=\"\";\n  emojiDisplay = false;\n\n  constructor(public navCtrl: NavController,\n              public navParams: NavParams) {\n    this.user.uid = firebase.auth().currentUser.uid;\n    this.user.email = firebase.auth().currentUser.email;\n    this.chatRef = navParams.data;\n    this.getUser();\n  }\n\n  ionViewDidLoad() {\n    this.chatListener();\n  }\n  \n  getUser() {\n    var doc = firebase.firestore().collection('Users').doc(this.user.uid);\n    doc.get().then((doc) => {\n      if (doc.data() != null){\n        if (doc.data().username != \"\")\n          this.user.username = doc.data().username;\n        else\n          this.user.username = doc.data().email;\n      }\n    });\n  }\n\n  // Chat listener\n  chatListener() {\n    this.chatRef.onSnapshot((doc) => {  // set Listener\n      this.msgList = doc.data().messages;\n      this.chatTitle = doc.data().name;\n    }, (err) => {                             // err Handler\n      console.error(\"Error: \" + err.message);\n    });\n  }\n\n  // Button Listeners\n  emojiBtn() {\n    this.emojiDisplay = !this.emojiDisplay;\n  }\n\n  sendBtn() {\n    // Do nothing if there is nothing but &nbsp;\n    if (!this.msgInput.trim()) return;\n    var msg = {\n      sender: this.user.username,\n      userId: this.user.uid,\n      content: this.msgInput.trim()};\n    // console.log(\"From Input : \" + msg.sender + \" said \" + msg.content);\n    this.msgList.push(msg);\n    this.chatRef.update({messages: this.msgList});\n    this.msgInput = \"\";\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/chat/chat.ts"],"sourceRoot":""}