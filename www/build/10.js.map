{"version":3,"sources":["../../src/pages/register/register.module.ts","../../src/pages/register/register.ts"],"names":[],"mappings":"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","file":"10.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { RegisterPage } from './register';\n//import { GoogleLoginComponent} from '../../components/google-login/google-login'; \n@NgModule({\n  declarations: [\n    RegisterPage,\n   // GoogleLoginComponent\n  ],\n  imports: [\n    IonicPageModule.forChild(RegisterPage),\n    //GoogleLoginComponent,\n  ],\n})\nexport class RegisterPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/register/register.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams, ToastController } from 'ionic-angular';\nimport { User } from '../../models/user';\nimport * as firebase from 'firebase';\n\n\n@IonicPage()\n@Component({\n  selector: 'page-register',\n  templateUrl: 'register.html',\n})\nexport class RegisterPage {\n\n  user = {} as User;\n  password = \"\";\n  retypePwd = \"\";\n\n  constructor(public navCtrl: NavController,\n              public navParams: NavParams,\n              private toastCtrl: ToastController) {\n    this.user = {\n      email: \"\",\n      username: \"\",\n      firstName: \"\",\n      lastName: \"\",\n      eventList: [],\n      friendList:[],\n      blockedUsers: [],\n      location: new firebase.firestore.GeoPoint(0,0)\n    };\n  }\n\n  async register(user: User){\n    try{\n      if (this.user.email.trim().length==0 || this.user.email.indexOf('@')<0){\n        throw {code: \"auth/invalid-email\"};\n      }\n      if (this.password.length < 6 || this.password.length > 18){\n        throw {code: \"pwd/length\"};\n      }\n      if (this.password != this.retypePwd){\n        throw {code: \"pwd/match\"};\n      }\n      const result = await firebase.auth().createUserWithEmailAndPassword(user.email, this.password)\n      .then((res) => {\n        let user = firebase.auth().currentUser;\n        user.sendEmailVerification();\n        this.initialDoc(user.uid);\n        firebase.auth().signOut();\n        this.navCtrl.pop();\n      });\n    }\n    catch(e){\n      var err_msg = \"\";\n      switch (e.code){\n        case('auth/invalid-email'): {\n          err_msg = \"Please Using an email to register!\";\n          break;\n        }\n        case('pwd/match'): {\n          err_msg = \"Re-Type password didn't match!\";\n          this.password = this.retypePwd = \"\";\n          break;\n        }\n        case('auth/email-already-in-use'): {\n          err_msg = \"Email already registered!\";\n          break;\n        }\n        case('pwd/length'): {\n          err_msg = \"Password should be 6-18 digits!\";\n          break;\n        }\n        default:{\n          err_msg = e.code;\n          break;\n        }\n      }\n      let err = this.toastCtrl.create({\n        message: err_msg,\n        duration: 3000,\n        position: 'bottom'\n      })\n      err.present();\n    }\n  }\n\n  initialDoc(userId){\n    firebase.firestore().collection('Users').doc(userId).set(this.user);\n    firebase.firestore().collection('Request').doc(userId).set({\n      eventRequest: [],\n      friendRequest: []\n    });\n  }\n\n  ionViewDidLoad() {\n    \n  }\n\n}\n\n\n// WEBPACK FOOTER //\n// ./src/pages/register/register.ts"],"sourceRoot":""}