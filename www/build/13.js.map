{"version":3,"sources":["../../src/pages/edit-event/edit-event.module.ts","../../src/pages/edit-event/edit-event.ts"],"names":[],"mappings":"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","file":"13.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { EditEventPage } from './edit-event';\n\n@NgModule({\n  declarations: [\n    EditEventPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(EditEventPage),\n  ],\n})\nexport class EditEventPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/edit-event/edit-event.module.ts","import { Component, ElementRef, ViewChild } from '@angular/core';\nimport { IonicPage, NavController, NavParams, Platform } from 'ionic-angular';\nimport { GoogleMaps, GoogleMap, GoogleMapsEvent, CameraPosition, GoogleMapOptions, Circle, Marker, MarkerOptions, LatLng} from '@ionic-native/google-maps';\nimport { Event } from '../../models/event';\nimport * as firebase from 'firebase';\n\ndeclare var google: any;\n\n@IonicPage()\n@Component({\n  selector: 'page-edit-event',\n  templateUrl: 'edit-event.html',\n})\nexport class EditEventPage {\n\n  event = {} as Event;\n  eventRef: any;\n  map: GoogleMap;\n  marker = {} as Marker;\n  circle = {} as Circle;\n  @ViewChild('map') mapElement:ElementRef;\n\n  hasPassword = false as boolean;\n  hasRadius = false as boolean;\n\n  constructor(public navCtrl: NavController,\n              public navParams: NavParams,\n              public platform:Platform) {\n    this.eventRef = navParams.data;\n  }\n\n  initialEvent(){\n    this.eventRef.onSnapshot((doc)=>{\n      if (doc.data() != null){\n        this.event.eventName = doc.data().eventName;\n        this.event.description = doc.data().description;\n        this.event.date = new Date(doc.data().date);\n        this.event.blockedUsers = doc.data().blockedUsers;\n        this.event.participants = doc.data().participants;\n        this.event.password = doc.data().password;\n        this.event.isPrivate = doc.data().isPrivate;\n        this.event.radius = doc.data().radius;\n        this.event.location = doc.data().location;\n        this.event.dateCreated = doc.data().dateCreated;\n        if (this.event.radius > 0) this.hasRadius = true;\n        if (this.event.password != \"\") this.hasPassword = true;\n        this.platform.ready().then(()=>{ this.initMap(); });\n      }\n    });\n    this.eventRef.onSnapshot(()=>{});\n  }\n\n  initMap() {\n    let location = new LatLng(this.event.location.latitude, this.event.location.longitude);\n    this.map = new google.maps.Map(this.mapElement.nativeElement, {\n      zoom: 15,\n      center: location\n    });\n    this.marker = new google.maps.Marker({\n      position: location,\n      map: this.map,\n      animation: 'Drop',\n      draggable: true\n    });\n    if (this.hasRadius){\n      this.circle = new google.maps.Circle({\n        strokeColor: '#21E7B6',\n        strokeOpacity: 0.8,\n        strokeWeight: 1,\n        fillColor: '#21E7B6',\n        fillOpacity: 0.35,\n        map: this.map,\n        center: location,\n        radius: Number.parseInt(this.event.radius+\"\")\n      });\n    }\n    google.maps.event.addListener(this.marker, 'dragend',()=>{this.setCircle()});\n  }\n\n  setCircle(){\n    if (this.hasRadius){\n      this.circle.setCenter(this.marker.getPosition());\n      this.circle.setRadius(Number.parseInt(this.event.radius + \"\"));\n    }\n    else{\n      this.circle.setCenter(this.marker.getPosition());\n      this.circle.setRadius(0);\n    }\n  }\n\n  saveBtn(){\n    // Save function here\n    if (this.validateValue()){\n      if (!this.hasRadius)\n        this.event.radius = 0;\n      if (!this.hasPassword)\n        this.event.password = \"\";\n      console.log(this.event);\n      this.eventRef.update(this.event);\n      this.navCtrl.pop();\n    }\n    else{\n      // Pop out here\n    }\n  }\n\n  validateValue() {\n    var isValid = true;\n    // Check Name\n    if (this.event.eventName==undefined || this.event.eventName.trim() == \"\")\n      isValid = false;\n    // Check Radius\n    if (this.event.radius <0 )\n      isValid = false;\n    // Pre-fix\n    if (isValid) {\n      this.event.eventName = this.event.eventName.trim();\n      this.event.password = this.event.password.trim();\n\n      /* Trick things here:\n        marker.getPostion().lat and marker.getPostion().lng supposed to be 2 number\n        in this plugin it turned to 2 getter function\n        it act like function when I add 2 bracket after them\n        it won't compile because cordova treat it as an error\n        it will work after `ionic serve`\n        so I decided transfer position to string and re-form it to number\n      */\n      let loc = this.marker.getPosition().toString();\n      let lat = Number.parseFloat(loc.substring(loc.indexOf('(')+1,loc.indexOf(',')));\n      let lng = Number.parseFloat(loc.substring(loc.indexOf(' ')+1,loc.indexOf(')')));\n      this.event.location = new firebase.firestore.GeoPoint(lat,lng);\n    }\n\n    return isValid;\n  }\n\n  ionViewDidLoad() {\n    this.initialEvent();\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/edit-event/edit-event.ts"],"sourceRoot":""}